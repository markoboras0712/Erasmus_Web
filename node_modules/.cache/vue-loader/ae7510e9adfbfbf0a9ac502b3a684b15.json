{"remainingRequest":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\src\\views\\Apartment.vue?vue&type=style&index=0&id=48183568&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\src\\views\\Apartment.vue","mtime":1624704316844},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYXBhcnRtZW50IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiB5ZWxsb3c7CiAgY29sb3I6IHllbGxvdzsKfQo="},{"version":3,"sources":["Apartment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA","file":"Apartment.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div class=\"apartment\">\r\n    <v-container>\r\n      <image-holder :apartmentId=\"this.$route.params.id\"></image-holder>\r\n      <v-date-picker\r\n        :allowed-dates=\"getAllowedDates\"\r\n        :disabled=\"!auth\"\r\n        :min=\"min\"\r\n        v-show=\"auth\"\r\n        v-model=\"reservationData.dates\"\r\n        range\r\n        full-width\r\n        :locale=\"$i18n.locale\"\r\n      ></v-date-picker>\r\n      <p style=\"color: white\" v-if=\"!auth\">\r\n        {{ $t('login')}}\r\n      </p>\r\n      <v-divider class=\"mb-4 mt-4\"></v-divider>\r\n      <v-btn\r\n        :disabled=\"reservationData.dates.length < 2\"\r\n        color=\"success\"\r\n        class=\"mr-4\"\r\n        @click=\"saveReservation\"\r\n      >\r\n        {{ $t('save') }}\r\n      </v-btn>\r\n    </v-container>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport ImageHolder from '../components/ImageHolder.vue'\r\n\r\nexport default {\r\n  data: () => ({\r\n    reservationData: {\r\n      dates: [],\r\n      src: null\r\n    },\r\n    reservedDates: null\r\n  }),\r\n  components: {\r\n    ImageHolder\r\n  },\r\n  computed: {\r\n    min () {\r\n      const min = new Date()\r\n      return min.toISOString()\r\n    },\r\n    dateRangeText () {\r\n      return this.reservationData.dates.join(' ~ ')\r\n    },\r\n    auth () {\r\n      return this.$store.getters.isAuthenticated\r\n    }\r\n\r\n  },\r\n  methods: {\r\n    getAllowedDates (val) {\r\n      return !this.reservedDates.some((element) => {\r\n        const from = new Date(element.dates[0]).getTime()\r\n        const to = new Date(element.dates[1]).getTime()\r\n        const check = new Date(val).getTime()\r\n        return check >= from && check <= to\r\n      })\r\n    },\r\n    saveReservation () {\r\n      this.reservationData.apartmentId = this.$route.params.id\r\n      this.reservationData.userEmail = localStorage.getItem('email')\r\n      axios\r\n        .post(\r\n          '/reservations.json' + '?auth=' + this.$store.getters.idToken,\r\n          this.reservationData\r\n        )\r\n        .then((res) => {\r\n          this.reservationData.id = res.data.name\r\n        })\r\n        .catch((err) => console.log(err))\r\n\r\n      this.$store.dispatch('storeReservation', this.reservationData)\r\n      this.$router.replace('/')\r\n    }\r\n  },\r\n  created () {\r\n    this.reservedDates = this.$store.getters.apartmentReservations(\r\n      this.$route.params.id\r\n    )\r\n  },\r\n  i18n: {\r\n    messages: {\r\n      hr: {\r\n        save: 'Spremi rezervaciju',\r\n        login: 'Prijavite se za rezervaciju'\r\n      },\r\n      en: {\r\n        save: 'Save reservation',\r\n        login: 'Please login to make a reservation'\r\n      },\r\n      de: {\r\n        save: 'Reservierung speichern',\r\n        login: 'Bitte melden Sie sich an, um eine Reservierung vorzunehmen'\r\n      },\r\n      it: {\r\n        save: 'Salva prenotazione',\r\n        login: 'Effettua il login per effettuare una prenotazione'\r\n      },\r\n      sl: {\r\n        save: 'Shrani rezervacijo',\r\n        login: 'Za rezervacijo se prijavite'\r\n      },\r\n      cs: {\r\n        save: 'Uložit rezervaci',\r\n        login: 'Chcete-li provést rezervaci, přihlaste se'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .apartment {\r\n    background-color: yellow;\r\n    color: yellow;\r\n  }\r\n</style>\r\n"]}]}