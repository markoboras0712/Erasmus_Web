{"remainingRequest":"C:\\src\\vue-projects\\zavrsni\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\src\\vue-projects\\zavrsni\\src\\views\\Apartment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\src\\vue-projects\\zavrsni\\src\\views\\Apartment.vue","mtime":1601210356782},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YTogKCkgPT4gKHsNCiAgICByZXNlcnZhdGlvbkRhdGE6IHsNCiAgICAgIGRhdGVzOiBbXQ0KICAgIH0sDQogICAgcmVzZXJ2ZWREYXRlczogbnVsbA0KICB9KSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBtaW4gKCkgew0KICAgICAgY29uc3QgbWluID0gbmV3IERhdGUoKQ0KICAgICAgcmV0dXJuIG1pbi50b0lTT1N0cmluZygpDQogICAgfSwNCiAgICBkYXRlUmFuZ2VUZXh0ICgpIHsNCiAgICAgIHJldHVybiB0aGlzLnJlc2VydmF0aW9uRGF0YS5kYXRlcy5qb2luKCcgfiAnKQ0KICAgIH0sDQogICAgYXV0aCAoKSB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5pc0F1dGhlbnRpY2F0ZWQNCiAgICB9DQogICAgLy8gbWluICgpIHsNCiAgICAvLyAgIHJldHVybiBuZXcgRGF0ZSgneXl5eS1NTS1kZCcpDQogICAgLy8gfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0QWxsb3dlZERhdGVzICh2YWwpIHsNCiAgICAgIHJldHVybiAhdGhpcy5yZXNlcnZlZERhdGVzLnNvbWUoKGVsZW1lbnQpID0+IHsNCiAgICAgICAgY29uc3QgZnJvbSA9IG5ldyBEYXRlKGVsZW1lbnQuZGF0ZXNbMF0pLmdldFRpbWUoKQ0KICAgICAgICBjb25zdCB0byA9IG5ldyBEYXRlKGVsZW1lbnQuZGF0ZXNbMV0pLmdldFRpbWUoKQ0KICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBEYXRlKHZhbCkuZ2V0VGltZSgpDQogICAgICAgIHJldHVybiBjaGVjayA+PSBmcm9tICYmIGNoZWNrIDw9IHRvDQogICAgICB9KQ0KICAgIH0sDQogICAgc2F2ZVJlc2VydmF0aW9uICgpIHsNCiAgICAgIHRoaXMucmVzZXJ2YXRpb25EYXRhLmFwYXJ0bWVudElkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkDQogICAgICB0aGlzLnJlc2VydmF0aW9uRGF0YS51c2VyRW1haWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKQ0KICAgICAgYXhpb3MNCiAgICAgICAgLnBvc3QoDQogICAgICAgICAgJy9yZXNlcnZhdGlvbnMuanNvbicgKyAnP2F1dGg9JyArIHRoaXMuJHN0b3JlLmdldHRlcnMuaWRUb2tlbiwNCiAgICAgICAgICB0aGlzLnJlc2VydmF0aW9uRGF0YQ0KICAgICAgICApDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICB0aGlzLnJlc2VydmF0aW9uRGF0YS5pZCA9IHJlcy5kYXRhLm5hbWUNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpDQoNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzdG9yZVJlc2VydmF0aW9uJywgdGhpcy5yZXNlcnZhdGlvbkRhdGEpDQogICAgICB0aGlzLnJlc2VydmF0aW9uRGF0YS5kYXRlcyA9IFtdDQogICAgICB0aGlzLiRkZXN0cm95KCkNCiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvJykNCiAgICB9DQogICAgLy8gYWxsb3dlZERhdGVzOiB2YWwgPT4gcGFyc2VJbnQodmFsLnNwbGl0KCctJylbMl0sIDEwKSAlIDIgPT09IDANCiAgfSwNCiAgY3JlYXRlZCAoKSB7DQogICAgY29uc29sZS5sb2coJ2lkIGFwYXJ0bWFuYScpDQogICAgY29uc29sZS5sb2codGhpcy4kcm91dGUucGFyYW1zLmlkKQ0KICAgIHRoaXMucmVzZXJ2ZWREYXRlcyA9IHRoaXMuJHN0b3JlLmdldHRlcnMuYXBhcnRtZW50UmVzZXJ2YXRpb25zKA0KICAgICAgdGhpcy4kcm91dGUucGFyYW1zLmlkDQogICAgKQ0KICAgIGNvbnNvbGUubG9nKCdkYXR1bWknKQ0KICAgIGNvbnNvbGUubG9nKHRoaXMucmVzZXJ2ZWREYXRlcykNCiAgfQ0KfQ0K"},{"version":3,"sources":["Apartment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Apartment.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <v-container>\r\n      <v-img\r\n        src=\"https://cdn.vuetifyjs.com/images/cards/sunshine.jpg\"\r\n        height=\"400px\"\r\n        class=\"mb-5\"\r\n      ></v-img>\r\n      <v-date-picker\r\n        :allowed-dates=\"getAllowedDates\"\r\n        :disabled=\"!auth\"\r\n        :min=\"min\"\r\n        v-show=\"auth\"\r\n        v-model=\"reservationData.dates\"\r\n        range\r\n        full-width\r\n        :locale=\"$i18n.locale\"\r\n      ></v-date-picker>\r\n      <p style=\"color: white\" v-if=\"!auth\">\r\n        Please login to make a reservation\r\n      </p>\r\n      <v-divider class=\"mb-4 mt-4\"></v-divider>\r\n      <v-btn\r\n        :disabled=\"reservationData.dates.length < 2\"\r\n        color=\"success\"\r\n        class=\"mr-4\"\r\n        @click=\"saveReservation\"\r\n      >\r\n        Save\r\n      </v-btn>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data: () => ({\r\n    reservationData: {\r\n      dates: []\r\n    },\r\n    reservedDates: null\r\n  }),\r\n  computed: {\r\n    min () {\r\n      const min = new Date()\r\n      return min.toISOString()\r\n    },\r\n    dateRangeText () {\r\n      return this.reservationData.dates.join(' ~ ')\r\n    },\r\n    auth () {\r\n      return this.$store.getters.isAuthenticated\r\n    }\r\n    // min () {\r\n    //   return new Date('yyyy-MM-dd')\r\n    // }\r\n  },\r\n  methods: {\r\n    getAllowedDates (val) {\r\n      return !this.reservedDates.some((element) => {\r\n        const from = new Date(element.dates[0]).getTime()\r\n        const to = new Date(element.dates[1]).getTime()\r\n        const check = new Date(val).getTime()\r\n        return check >= from && check <= to\r\n      })\r\n    },\r\n    saveReservation () {\r\n      this.reservationData.apartmentId = this.$route.params.id\r\n      this.reservationData.userEmail = localStorage.getItem('email')\r\n      axios\r\n        .post(\r\n          '/reservations.json' + '?auth=' + this.$store.getters.idToken,\r\n          this.reservationData\r\n        )\r\n        .then((res) => {\r\n          this.reservationData.id = res.data.name\r\n        })\r\n        .catch((err) => console.log(err))\r\n\r\n      this.$store.dispatch('storeReservation', this.reservationData)\r\n      this.reservationData.dates = []\r\n      this.$destroy()\r\n      this.$router.replace('/')\r\n    }\r\n    // allowedDates: val => parseInt(val.split('-')[2], 10) % 2 === 0\r\n  },\r\n  created () {\r\n    console.log('id apartmana')\r\n    console.log(this.$route.params.id)\r\n    this.reservedDates = this.$store.getters.apartmentReservations(\r\n      this.$route.params.id\r\n    )\r\n    console.log('datumi')\r\n    console.log(this.reservedDates)\r\n  }\r\n}\r\n</script>\r\n"]}]}