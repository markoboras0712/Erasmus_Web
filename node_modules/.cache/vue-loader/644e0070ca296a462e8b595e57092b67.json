{"remainingRequest":"C:\\src\\vue-projects\\zavrsni\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\src\\vue-projects\\zavrsni\\src\\views\\Apartment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\src\\vue-projects\\zavrsni\\src\\views\\Apartment.vue","mtime":1601272720153},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgSW1hZ2VIb2xkZXIgZnJvbSAnLi4vY29tcG9uZW50cy9JbWFnZUhvbGRlci52dWUnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YTogKCkgPT4gKHsNCiAgICByZXNlcnZhdGlvbkRhdGE6IHsNCiAgICAgIGRhdGVzOiBbXSwNCiAgICAgIHNyYzogbnVsbA0KICAgIH0sDQogICAgcmVzZXJ2ZWREYXRlczogbnVsbA0KICB9KSwNCiAgY29tcG9uZW50czogew0KICAgIEltYWdlSG9sZGVyDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgbWluICgpIHsNCiAgICAgIGNvbnN0IG1pbiA9IG5ldyBEYXRlKCkNCiAgICAgIHJldHVybiBtaW4udG9JU09TdHJpbmcoKQ0KICAgIH0sDQogICAgZGF0ZVJhbmdlVGV4dCAoKSB7DQogICAgICByZXR1cm4gdGhpcy5yZXNlcnZhdGlvbkRhdGEuZGF0ZXMuam9pbignIH4gJykNCiAgICB9LA0KICAgIGF1dGggKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuaXNBdXRoZW50aWNhdGVkDQogICAgfQ0KDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRBbGxvd2VkRGF0ZXMgKHZhbCkgew0KICAgICAgcmV0dXJuICF0aGlzLnJlc2VydmVkRGF0ZXMuc29tZSgoZWxlbWVudCkgPT4gew0KICAgICAgICBjb25zdCBmcm9tID0gbmV3IERhdGUoZWxlbWVudC5kYXRlc1swXSkuZ2V0VGltZSgpDQogICAgICAgIGNvbnN0IHRvID0gbmV3IERhdGUoZWxlbWVudC5kYXRlc1sxXSkuZ2V0VGltZSgpDQogICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IERhdGUodmFsKS5nZXRUaW1lKCkNCiAgICAgICAgcmV0dXJuIGNoZWNrID49IGZyb20gJiYgY2hlY2sgPD0gdG8NCiAgICAgIH0pDQogICAgfSwNCiAgICBzYXZlUmVzZXJ2YXRpb24gKCkgew0KICAgICAgdGhpcy5yZXNlcnZhdGlvbkRhdGEuYXBhcnRtZW50SWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQNCiAgICAgIHRoaXMucmVzZXJ2YXRpb25EYXRhLnVzZXJFbWFpbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpDQogICAgICBheGlvcw0KICAgICAgICAucG9zdCgNCiAgICAgICAgICAnL3Jlc2VydmF0aW9ucy5qc29uJyArICc/YXV0aD0nICsgdGhpcy4kc3RvcmUuZ2V0dGVycy5pZFRva2VuLA0KICAgICAgICAgIHRoaXMucmVzZXJ2YXRpb25EYXRhDQogICAgICAgICkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMucmVzZXJ2YXRpb25EYXRhLmlkID0gcmVzLmRhdGEubmFtZQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSkNCg0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3N0b3JlUmVzZXJ2YXRpb24nLCB0aGlzLnJlc2VydmF0aW9uRGF0YSkNCiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvJykNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHRoaXMucmVzZXJ2ZWREYXRlcyA9IHRoaXMuJHN0b3JlLmdldHRlcnMuYXBhcnRtZW50UmVzZXJ2YXRpb25zKA0KICAgICAgdGhpcy4kcm91dGUucGFyYW1zLmlkDQogICAgKQ0KICB9LA0KICBpMThuOiB7DQogICAgbWVzc2FnZXM6IHsNCiAgICAgIGhyOiB7DQogICAgICAgIHNhdmU6ICdTcHJlbWkgcmV6ZXJ2YWNpanUnLA0KICAgICAgICBsb2dpbjogJ1ByaWphdml0ZSBzZSB6YSByZXplcnZhY2lqdScNCiAgICAgIH0sDQogICAgICBlbjogew0KICAgICAgICBzYXZlOiAnU2F2ZSByZXNlcnZhdGlvbicsDQogICAgICAgIGxvZ2luOiAnUGxlYXNlIGxvZ2luIHRvIG1ha2UgYSByZXNlcnZhdGlvbicNCiAgICAgIH0sDQogICAgICBkZTogew0KICAgICAgICBzYXZlOiAnUmVzZXJ2aWVydW5nIHNwZWljaGVybicsDQogICAgICAgIGxvZ2luOiAnQml0dGUgbWVsZGVuIFNpZSBzaWNoIGFuLCB1bSBlaW5lIFJlc2VydmllcnVuZyB2b3J6dW5laG1lbicNCiAgICAgIH0sDQogICAgICBpdDogew0KICAgICAgICBzYXZlOiAnU2FsdmEgcHJlbm90YXppb25lJywNCiAgICAgICAgbG9naW46ICdFZmZldHR1YSBpbCBsb2dpbiBwZXIgZWZmZXR0dWFyZSB1bmEgcHJlbm90YXppb25lJw0KICAgICAgfSwNCiAgICAgIHNsOiB7DQogICAgICAgIHNhdmU6ICdTaHJhbmkgcmV6ZXJ2YWNpam8nLA0KICAgICAgICBsb2dpbjogJ1phIHJlemVydmFjaWpvIHNlIHByaWphdml0ZScNCiAgICAgIH0sDQogICAgICBjczogew0KICAgICAgICBzYXZlOiAnVWxvxb5pdCByZXplcnZhY2knLA0KICAgICAgICBsb2dpbjogJ0NoY2V0ZS1saSBwcm92w6lzdCByZXplcnZhY2ksIHDFmWlobGFzdGUgc2UnDQogICAgICB9DQogICAgfQ0KICB9DQp9DQoNCg=="},{"version":3,"sources":["Apartment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Apartment.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <v-container>\r\n      <image-holder :apartmentId=\"this.$route.params.id\"></image-holder>\r\n      <v-date-picker\r\n        :allowed-dates=\"getAllowedDates\"\r\n        :disabled=\"!auth\"\r\n        :min=\"min\"\r\n        v-show=\"auth\"\r\n        v-model=\"reservationData.dates\"\r\n        range\r\n        full-width\r\n        :locale=\"$i18n.locale\"\r\n      ></v-date-picker>\r\n      <p style=\"color: white\" v-if=\"!auth\">\r\n        {{ $t('login')}}\r\n      </p>\r\n      <v-divider class=\"mb-4 mt-4\"></v-divider>\r\n      <v-btn\r\n        :disabled=\"reservationData.dates.length < 2\"\r\n        color=\"success\"\r\n        class=\"mr-4\"\r\n        @click=\"saveReservation\"\r\n      >\r\n        {{ $t('save') }}\r\n      </v-btn>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport ImageHolder from '../components/ImageHolder.vue'\r\n\r\nexport default {\r\n  data: () => ({\r\n    reservationData: {\r\n      dates: [],\r\n      src: null\r\n    },\r\n    reservedDates: null\r\n  }),\r\n  components: {\r\n    ImageHolder\r\n  },\r\n  computed: {\r\n    min () {\r\n      const min = new Date()\r\n      return min.toISOString()\r\n    },\r\n    dateRangeText () {\r\n      return this.reservationData.dates.join(' ~ ')\r\n    },\r\n    auth () {\r\n      return this.$store.getters.isAuthenticated\r\n    }\r\n\r\n  },\r\n  methods: {\r\n    getAllowedDates (val) {\r\n      return !this.reservedDates.some((element) => {\r\n        const from = new Date(element.dates[0]).getTime()\r\n        const to = new Date(element.dates[1]).getTime()\r\n        const check = new Date(val).getTime()\r\n        return check >= from && check <= to\r\n      })\r\n    },\r\n    saveReservation () {\r\n      this.reservationData.apartmentId = this.$route.params.id\r\n      this.reservationData.userEmail = localStorage.getItem('email')\r\n      axios\r\n        .post(\r\n          '/reservations.json' + '?auth=' + this.$store.getters.idToken,\r\n          this.reservationData\r\n        )\r\n        .then((res) => {\r\n          this.reservationData.id = res.data.name\r\n        })\r\n        .catch((err) => console.log(err))\r\n\r\n      this.$store.dispatch('storeReservation', this.reservationData)\r\n      this.$router.replace('/')\r\n    }\r\n  },\r\n  created () {\r\n    this.reservedDates = this.$store.getters.apartmentReservations(\r\n      this.$route.params.id\r\n    )\r\n  },\r\n  i18n: {\r\n    messages: {\r\n      hr: {\r\n        save: 'Spremi rezervaciju',\r\n        login: 'Prijavite se za rezervaciju'\r\n      },\r\n      en: {\r\n        save: 'Save reservation',\r\n        login: 'Please login to make a reservation'\r\n      },\r\n      de: {\r\n        save: 'Reservierung speichern',\r\n        login: 'Bitte melden Sie sich an, um eine Reservierung vorzunehmen'\r\n      },\r\n      it: {\r\n        save: 'Salva prenotazione',\r\n        login: 'Effettua il login per effettuare una prenotazione'\r\n      },\r\n      sl: {\r\n        save: 'Shrani rezervacijo',\r\n        login: 'Za rezervacijo se prijavite'\r\n      },\r\n      cs: {\r\n        save: 'Uložit rezervaci',\r\n        login: 'Chcete-li provést rezervaci, přihlaste se'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n"]}]}