{"remainingRequest":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\src\\views\\Apartment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\src\\views\\Apartment.vue","mtime":1601272720153},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBJbWFnZUhvbGRlciBmcm9tICcuLi9jb21wb25lbnRzL0ltYWdlSG9sZGVyLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVzZXJ2YXRpb25EYXRhOiB7CiAgICAgICAgZGF0ZXM6IFtdLAogICAgICAgIHNyYzogbnVsbAogICAgICB9LAogICAgICByZXNlcnZlZERhdGVzOiBudWxsCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgSW1hZ2VIb2xkZXI6IEltYWdlSG9sZGVyCiAgfSwKICBjb21wdXRlZDogewogICAgbWluOiBmdW5jdGlvbiBtaW4oKSB7CiAgICAgIHZhciBtaW4gPSBuZXcgRGF0ZSgpOwogICAgICByZXR1cm4gbWluLnRvSVNPU3RyaW5nKCk7CiAgICB9LAogICAgZGF0ZVJhbmdlVGV4dDogZnVuY3Rpb24gZGF0ZVJhbmdlVGV4dCgpIHsKICAgICAgcmV0dXJuIHRoaXMucmVzZXJ2YXRpb25EYXRhLmRhdGVzLmpvaW4oJyB+ICcpOwogICAgfSwKICAgIGF1dGg6IGZ1bmN0aW9uIGF1dGgoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmlzQXV0aGVudGljYXRlZDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEFsbG93ZWREYXRlczogZnVuY3Rpb24gZ2V0QWxsb3dlZERhdGVzKHZhbCkgewogICAgICByZXR1cm4gIXRoaXMucmVzZXJ2ZWREYXRlcy5zb21lKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIGZyb20gPSBuZXcgRGF0ZShlbGVtZW50LmRhdGVzWzBdKS5nZXRUaW1lKCk7CiAgICAgICAgdmFyIHRvID0gbmV3IERhdGUoZWxlbWVudC5kYXRlc1sxXSkuZ2V0VGltZSgpOwogICAgICAgIHZhciBjaGVjayA9IG5ldyBEYXRlKHZhbCkuZ2V0VGltZSgpOwogICAgICAgIHJldHVybiBjaGVjayA+PSBmcm9tICYmIGNoZWNrIDw9IHRvOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlUmVzZXJ2YXRpb246IGZ1bmN0aW9uIHNhdmVSZXNlcnZhdGlvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMucmVzZXJ2YXRpb25EYXRhLmFwYXJ0bWVudElkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICB0aGlzLnJlc2VydmF0aW9uRGF0YS51c2VyRW1haWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW1haWwnKTsKICAgICAgYXhpb3MucG9zdCgnL3Jlc2VydmF0aW9ucy5qc29uJyArICc/YXV0aD0nICsgdGhpcy4kc3RvcmUuZ2V0dGVycy5pZFRva2VuLCB0aGlzLnJlc2VydmF0aW9uRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMucmVzZXJ2YXRpb25EYXRhLmlkID0gcmVzLmRhdGEubmFtZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3N0b3JlUmVzZXJ2YXRpb24nLCB0aGlzLnJlc2VydmF0aW9uRGF0YSk7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvJyk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5yZXNlcnZlZERhdGVzID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5hcGFydG1lbnRSZXNlcnZhdGlvbnModGhpcy4kcm91dGUucGFyYW1zLmlkKTsKICB9LAogIGkxOG46IHsKICAgIG1lc3NhZ2VzOiB7CiAgICAgIGhyOiB7CiAgICAgICAgc2F2ZTogJ1NwcmVtaSByZXplcnZhY2lqdScsCiAgICAgICAgbG9naW46ICdQcmlqYXZpdGUgc2UgemEgcmV6ZXJ2YWNpanUnCiAgICAgIH0sCiAgICAgIGVuOiB7CiAgICAgICAgc2F2ZTogJ1NhdmUgcmVzZXJ2YXRpb24nLAogICAgICAgIGxvZ2luOiAnUGxlYXNlIGxvZ2luIHRvIG1ha2UgYSByZXNlcnZhdGlvbicKICAgICAgfSwKICAgICAgZGU6IHsKICAgICAgICBzYXZlOiAnUmVzZXJ2aWVydW5nIHNwZWljaGVybicsCiAgICAgICAgbG9naW46ICdCaXR0ZSBtZWxkZW4gU2llIHNpY2ggYW4sIHVtIGVpbmUgUmVzZXJ2aWVydW5nIHZvcnp1bmVobWVuJwogICAgICB9LAogICAgICBpdDogewogICAgICAgIHNhdmU6ICdTYWx2YSBwcmVub3RhemlvbmUnLAogICAgICAgIGxvZ2luOiAnRWZmZXR0dWEgaWwgbG9naW4gcGVyIGVmZmV0dHVhcmUgdW5hIHByZW5vdGF6aW9uZScKICAgICAgfSwKICAgICAgc2w6IHsKICAgICAgICBzYXZlOiAnU2hyYW5pIHJlemVydmFjaWpvJywKICAgICAgICBsb2dpbjogJ1phIHJlemVydmFjaWpvIHNlIHByaWphdml0ZScKICAgICAgfSwKICAgICAgY3M6IHsKICAgICAgICBzYXZlOiAnVWxvxb5pdCByZXplcnZhY2knLAogICAgICAgIGxvZ2luOiAnQ2hjZXRlLWxpIHByb3bDqXN0IHJlemVydmFjaSwgcMWZaWhsYXN0ZSBzZScKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["Apartment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <v-container>\r\n      <image-holder :apartmentId=\"this.$route.params.id\"></image-holder>\r\n      <v-date-picker\r\n        :allowed-dates=\"getAllowedDates\"\r\n        :disabled=\"!auth\"\r\n        :min=\"min\"\r\n        v-show=\"auth\"\r\n        v-model=\"reservationData.dates\"\r\n        range\r\n        full-width\r\n        :locale=\"$i18n.locale\"\r\n      ></v-date-picker>\r\n      <p style=\"color: white\" v-if=\"!auth\">\r\n        {{ $t('login')}}\r\n      </p>\r\n      <v-divider class=\"mb-4 mt-4\"></v-divider>\r\n      <v-btn\r\n        :disabled=\"reservationData.dates.length < 2\"\r\n        color=\"success\"\r\n        class=\"mr-4\"\r\n        @click=\"saveReservation\"\r\n      >\r\n        {{ $t('save') }}\r\n      </v-btn>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport ImageHolder from '../components/ImageHolder.vue'\r\n\r\nexport default {\r\n  data: () => ({\r\n    reservationData: {\r\n      dates: [],\r\n      src: null\r\n    },\r\n    reservedDates: null\r\n  }),\r\n  components: {\r\n    ImageHolder\r\n  },\r\n  computed: {\r\n    min () {\r\n      const min = new Date()\r\n      return min.toISOString()\r\n    },\r\n    dateRangeText () {\r\n      return this.reservationData.dates.join(' ~ ')\r\n    },\r\n    auth () {\r\n      return this.$store.getters.isAuthenticated\r\n    }\r\n\r\n  },\r\n  methods: {\r\n    getAllowedDates (val) {\r\n      return !this.reservedDates.some((element) => {\r\n        const from = new Date(element.dates[0]).getTime()\r\n        const to = new Date(element.dates[1]).getTime()\r\n        const check = new Date(val).getTime()\r\n        return check >= from && check <= to\r\n      })\r\n    },\r\n    saveReservation () {\r\n      this.reservationData.apartmentId = this.$route.params.id\r\n      this.reservationData.userEmail = localStorage.getItem('email')\r\n      axios\r\n        .post(\r\n          '/reservations.json' + '?auth=' + this.$store.getters.idToken,\r\n          this.reservationData\r\n        )\r\n        .then((res) => {\r\n          this.reservationData.id = res.data.name\r\n        })\r\n        .catch((err) => console.log(err))\r\n\r\n      this.$store.dispatch('storeReservation', this.reservationData)\r\n      this.$router.replace('/')\r\n    }\r\n  },\r\n  created () {\r\n    this.reservedDates = this.$store.getters.apartmentReservations(\r\n      this.$route.params.id\r\n    )\r\n  },\r\n  i18n: {\r\n    messages: {\r\n      hr: {\r\n        save: 'Spremi rezervaciju',\r\n        login: 'Prijavite se za rezervaciju'\r\n      },\r\n      en: {\r\n        save: 'Save reservation',\r\n        login: 'Please login to make a reservation'\r\n      },\r\n      de: {\r\n        save: 'Reservierung speichern',\r\n        login: 'Bitte melden Sie sich an, um eine Reservierung vorzunehmen'\r\n      },\r\n      it: {\r\n        save: 'Salva prenotazione',\r\n        login: 'Effettua il login per effettuare una prenotazione'\r\n      },\r\n      sl: {\r\n        save: 'Shrani rezervacijo',\r\n        login: 'Za rezervacijo se prijavite'\r\n      },\r\n      cs: {\r\n        save: 'Uložit rezervaci',\r\n        login: 'Chcete-li provést rezervaci, přihlaste se'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n"],"sourceRoot":"src/views"}]}