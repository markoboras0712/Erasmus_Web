{"remainingRequest":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js!C:\\src\\vue-projects\\zavrsni\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\src\\vue-projects\\zavrsni\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\src\\vue-projects\\zavrsni\\src\\store\\modules\\auth.js","mtime":1600897758719},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBheGlvcyBmcm9tICcuLi8uLi9heGlvcy1hdXRoJzsKaW1wb3J0IG1haW5BeGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vcm91dGVyL2luZGV4JzsKdmFyIHN0YXRlID0gewogIGlkVG9rZW46IG51bGwsCiAgdXNlcklkOiBudWxsLAogIHVzZXI6IG51bGwKfTsKdmFyIG11dGF0aW9ucyA9IHsKICBhdXRoVXNlcjogZnVuY3Rpb24gYXV0aFVzZXIoc3RhdGUsIHVzZXJEYXRhKSB7CiAgICBzdGF0ZS5pZFRva2VuID0gdXNlckRhdGEudG9rZW47CiAgICBzdGF0ZS51c2VySWQgPSB1c2VyRGF0YS51c2VySWQ7CiAgfSwKICBzdG9yZVVzZXI6IGZ1bmN0aW9uIHN0b3JlVXNlcihzdGF0ZSwgdXNlcikgewogICAgc3RhdGUudXNlciA9IHVzZXI7CiAgfSwKICBjbGVhckRhdGE6IGZ1bmN0aW9uIGNsZWFyRGF0YShzdGF0ZSkgewogICAgc3RhdGUuaWRUb2tlbiA9IG51bGw7CiAgICBzdGF0ZS51c2VySWQgPSBudWxsOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgc2V0TG9nb3V0VGltZXI6IGZ1bmN0aW9uIHNldExvZ291dFRpbWVyKF9yZWYsIGV4cGlyYXRpb25UaW1lKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgY29tbWl0KCdjbGVhckRhdGEnKTsKICAgIH0sIGV4cGlyYXRpb25UaW1lICogMTAwMCk7CiAgfSwKICBzaWdudXA6IGZ1bmN0aW9uIHNpZ251cChfcmVmMiwgYXV0aERhdGEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgIGF4aW9zLnBvc3QoJzpzaWduVXA/a2V5PUFJemFTeUJ1dEhaUzc3TVRiYlVRTTdNMGVNME5ZQjdsN0t4aWJmSScsIHsKICAgICAgZW1haWw6IGF1dGhEYXRhLmVtYWlsLAogICAgICBwYXNzd29yZDogYXV0aERhdGEucGFzc3dvcmQsCiAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgY29tbWl0KCdhdXRoVXNlcicsIHsKICAgICAgICB0b2tlbjogcmVzLmRhdGEuaWRUb2tlbiwKICAgICAgICB1c2VySWQ6IHJlcy5kYXRhLmxvY2FsSWQKICAgICAgfSk7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgZXhwaXJhdGlvbkRhdGUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgcmVzLmRhdGEuZXhwaXJlc0luICogMTAwMCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLmlkVG9rZW4pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgcmVzLmRhdGEubG9jYWxJZCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdleHBpcmF0aW9uRGF0ZScsIGV4cGlyYXRpb25EYXRlKTsKICAgICAgZGlzcGF0Y2goJ3N0b3JlVXNlcicsIGF1dGhEYXRhKTsKICAgICAgZGlzcGF0Y2goJ3NldExvZ291dFRJbWVyJywgcmVzLmRhdGEuZXhwaXJlc0luKTsKICAgICAgcm91dGVyLnJlcGxhY2UoJy8nKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICB9KTsKICB9LAogIHN0b3JlVXNlcjogZnVuY3Rpb24gc3RvcmVVc2VyKF9yZWYzLCB1c2VyRGF0YSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwoKICAgIGlmICghc3RhdGUuaWRUb2tlbikgewogICAgICByZXR1cm47CiAgICB9CgogICAgbWFpbkF4aW9zLnBvc3QoJy91c2Vycy5qc29uJyArICc/YXV0aD0nICsgc3RhdGUuaWRUb2tlbiwgdXNlckRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICByZXR1cm4gY29uc29sZS5sb2cocmVzKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICB9KTsKICB9LAogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmNCwgYXV0aERhdGEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmNC5kaXNwYXRjaDsKICAgIGF4aW9zLnBvc3QoJzpzaWduSW5XaXRoUGFzc3dvcmQ/a2V5PUFJemFTeUJ1dEhaUzc3TVRiYlVRTTdNMGVNME5ZQjdsN0t4aWJmSScsIHsKICAgICAgZW1haWw6IGF1dGhEYXRhLmVtYWlsLAogICAgICBwYXNzd29yZDogYXV0aERhdGEucGFzc3dvcmQsCiAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgY29tbWl0KCdhdXRoVXNlcicsIHsKICAgICAgICB0b2tlbjogcmVzLmRhdGEuaWRUb2tlbiwKICAgICAgICB1c2VySWQ6IHJlcy5kYXRhLmxvY2FsSWQKICAgICAgfSk7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgZXhwaXJhdGlvbkRhdGUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgcmVzLmRhdGEuZXhwaXJlc0luICogMTAwMCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLmlkVG9rZW4pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgcmVzLmRhdGEubG9jYWxJZCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdleHBpcmF0aW9uRGF0ZScsIGV4cGlyYXRpb25EYXRlKTsKICAgICAgZGlzcGF0Y2goJ3NldExvZ291dFRpbWVyJywgcmVzLmRhdGEuZXhwaXJlc0luKTsKICAgICAgcm91dGVyLnJlcGxhY2UoJy8nKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICB9KTsKICB9LAogIGF0dGVtcHRBdXRvTG9naW46IGZ1bmN0aW9uIGF0dGVtcHRBdXRvTG9naW4oX3JlZjUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgIGlmICghdG9rZW4pIHJldHVybjsKICAgIHZhciBleHBpcmF0aW9uRGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdleHBpcmF0aW9uRGF0ZScpOwogICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CgogICAgaWYgKG5vdyA+PSBleHBpcmF0aW9uRGF0ZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKICAgIGNvbW1pdCgnYXV0aFVzZXInLCB7CiAgICAgIHRva2VuOiB0b2tlbiwKICAgICAgdXNlcklkOiB1c2VySWQKICAgIH0pOwogIH0sCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNi5jb21taXQ7CiAgICBjb21taXQoJ2NsZWFyRGF0YScpOwogICAgcm91dGVyLnJlcGxhY2UoJy9sb2dpbicpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2V4cGlyYXRpb25EYXRlJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySWQnKTsgLy8gbG9jYWxTdG9yYWdlLmNsZWFyKCkKICB9LAogIGZldGNoVXNlcjogZnVuY3Rpb24gZmV0Y2hVc2VyKF9yZWY3KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjcuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjcuc3RhdGU7CgogICAgaWYgKCFzdGF0ZS5pZFRva2VuKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBtYWluQXhpb3MuZ2V0KCcvdXNlcnMuanNvbicgKyAnP2F1dGg9JyArIHN0YXRlLmlkVG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwogICAgICB2YXIgdXNlcnMgPSBbXTsKCiAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7CiAgICAgICAgdmFyIHVzZXIgPSBkYXRhW2tleV07CiAgICAgICAgdXNlci5pZCA9IGtleTsKICAgICAgICB1c2Vycy5wdXNoKHVzZXIpOwogICAgICB9CgogICAgICBjb25zb2xlLmxvZyh1c2Vycyk7CiAgICAgIGNvbW1pdCgnc3RvcmVVc2VyJywgdXNlcnNbMF0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgIH0pOwogIH0KfTsKdmFyIGdldHRlcnMgPSB7CiAgdXNlcjogZnVuY3Rpb24gdXNlcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgfSwKICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmlkVG9rZW4gIT09IG51bGw7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycwp9Ow=="},{"version":3,"sources":["C:/src/vue-projects/zavrsni/src/store/modules/auth.js"],"names":["axios","mainAxios","router","state","idToken","userId","user","mutations","authUser","userData","token","storeUser","clearData","actions","setLogoutTimer","expirationTime","commit","setTimeout","signup","authData","dispatch","post","email","password","returnSecureToken","then","res","console","log","data","localId","now","Date","expirationDate","getTime","expiresIn","localStorage","setItem","replace","catch","err","login","attemptAutoLogin","getItem","logout","removeItem","fetchUser","get","users","key","id","push","getters","isAuthenticated"],"mappings":"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","sourcesContent":["import axios from '../../axios-auth'\r\nimport mainAxios from 'axios'\r\nimport router from '../../router/index'\r\n\r\nconst state = {\r\n  idToken: null,\r\n  userId: null,\r\n  user: null\r\n}\r\n\r\nconst mutations = {\r\n  authUser (state, userData) {\r\n    state.idToken = userData.token\r\n    state.userId = userData.userId\r\n  },\r\n  storeUser (state, user) {\r\n    state.user = user\r\n  },\r\n  clearData (state) {\r\n    state.idToken = null\r\n    state.userId = null\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  setLogoutTimer ({ commit }, expirationTime) {\r\n    setTimeout(() => {\r\n      commit('clearData')\r\n    }, expirationTime * 1000)\r\n  },\r\n  signup ({ commit, dispatch }, authData) {\r\n    axios.post(':signUp?key=AIzaSyButHZS77MTbbUQM7M0eM0NYB7l7KxibfI', {\r\n      email: authData.email,\r\n      password: authData.password,\r\n      returnSecureToken: true\r\n    })\r\n      .then(res => {\r\n        console.log(res)\r\n        commit('authUser', {\r\n          token: res.data.idToken,\r\n          userId: res.data.localId\r\n        })\r\n        const now = new Date()\r\n        const expirationDate = new Date(now.getTime() + res.data.expiresIn * 1000)\r\n        localStorage.setItem('token', res.data.idToken)\r\n        localStorage.setItem('userId', res.data.localId)\r\n        localStorage.setItem('expirationDate', expirationDate)\r\n        dispatch('storeUser', authData)\r\n        dispatch('setLogoutTImer', res.data.expiresIn)\r\n        router.replace('/')\r\n      })\r\n      .catch(err => console.log(err))\r\n  },\r\n  storeUser ({ commit, state }, userData) {\r\n    if (!state.idToken) {\r\n      return\r\n    }\r\n    mainAxios.post('/users.json' + '?auth=' + state.idToken, userData)\r\n      .then(res => console.log(res))\r\n      .catch(err => console.log(err))\r\n  },\r\n  login ({ commit, dispatch }, authData) {\r\n    axios.post(':signInWithPassword?key=AIzaSyButHZS77MTbbUQM7M0eM0NYB7l7KxibfI', {\r\n      email: authData.email,\r\n      password: authData.password,\r\n      returnSecureToken: true\r\n    })\r\n      .then(res => {\r\n        console.log(res)\r\n        commit('authUser', {\r\n          token: res.data.idToken,\r\n          userId: res.data.localId\r\n        })\r\n        const now = new Date()\r\n        const expirationDate = new Date(now.getTime() + res.data.expiresIn * 1000)\r\n        localStorage.setItem('token', res.data.idToken)\r\n        localStorage.setItem('userId', res.data.localId)\r\n        localStorage.setItem('expirationDate', expirationDate)\r\n        dispatch('setLogoutTimer', res.data.expiresIn)\r\n        router.replace('/')\r\n      })\r\n      .catch(err => console.log(err))\r\n  },\r\n  attemptAutoLogin ({ commit }) {\r\n    const token = localStorage.getItem('token')\r\n    if (!token) return\r\n    const expirationDate = localStorage.getItem('expirationDate')\r\n    const now = new Date()\r\n    if (now >= expirationDate) {\r\n      return\r\n    }\r\n    const userId = localStorage.getItem('userId')\r\n    commit('authUser', {\r\n      token: token,\r\n      userId: userId\r\n    })\r\n  },\r\n  logout ({ commit }) {\r\n    commit('clearData')\r\n    router.replace('/login')\r\n    localStorage.removeItem('expirationDate')\r\n    localStorage.removeItem('token')\r\n    localStorage.removeItem('userId')\r\n    // localStorage.clear()\r\n  },\r\n  fetchUser ({ commit, state }) {\r\n    if (!state.idToken) {\r\n      return\r\n    }\r\n    mainAxios.get('/users.json' + '?auth=' + state.idToken)\r\n      .then((res) => {\r\n        console.log(res)\r\n        const data = res.data\r\n        const users = []\r\n        for (const key in data) {\r\n          const user = data[key]\r\n          user.id = key\r\n          users.push(user)\r\n        }\r\n        console.log(users)\r\n        commit('storeUser', users[0])\r\n      })\r\n      .catch((err) => console.log(err))\r\n  }\r\n}\r\n\r\nconst getters = {\r\n  user (state) {\r\n    return state.user\r\n  },\r\n  isAuthenticated (state) {\r\n    return state.idToken !== null\r\n  }\r\n}\r\n\r\nexport default {\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters\r\n}\r\n"]}]}