{"remainingRequest":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\src\\store\\modules\\auth.js","mtime":1624559681593},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\boras\\OneDrive\\Desktop\\Web_Programming_Erasmus\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgYXhpb3MgZnJvbSAnLi4vLi4vYXhpb3MtYXV0aCc7CmltcG9ydCBtYWluQXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL3JvdXRlci9pbmRleCc7CnZhciBzdGF0ZSA9IHsKICBpZFRva2VuOiBudWxsLAogIHVzZXJJZDogbnVsbCwKICB1c2VyczogW10KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBhdXRoVXNlcjogZnVuY3Rpb24gYXV0aFVzZXIoc3RhdGUsIHVzZXJEYXRhKSB7CiAgICBzdGF0ZS5pZFRva2VuID0gdXNlckRhdGEudG9rZW47CiAgICBzdGF0ZS51c2VySWQgPSB1c2VyRGF0YS51c2VySWQ7CiAgfSwKICBzdG9yZVVzZXJzOiBmdW5jdGlvbiBzdG9yZVVzZXJzKHN0YXRlLCB1c2VycykgewogICAgc3RhdGUudXNlcnMgPSB1c2VyczsKICB9LAogIGNsZWFyRGF0YTogZnVuY3Rpb24gY2xlYXJEYXRhKHN0YXRlKSB7CiAgICBzdGF0ZS5pZFRva2VuID0gbnVsbDsKICAgIHN0YXRlLnVzZXJJZCA9IG51bGw7CiAgICBzdGF0ZS51c2VyRW1haWwgPSBudWxsOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgc2V0TG9nb3V0VGltZXI6IGZ1bmN0aW9uIHNldExvZ291dFRpbWVyKF9yZWYsIGV4cGlyYXRpb25UaW1lKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgY29tbWl0KCdjbGVhckRhdGEnKTsKICAgIH0sIGV4cGlyYXRpb25UaW1lICogMTAwMCk7CiAgfSwKICBzaWdudXA6IGZ1bmN0aW9uIHNpZ251cChfcmVmMiwgYXV0aERhdGEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgIGF4aW9zLnBvc3QoJzpzaWduVXA/a2V5PUFJemFTeUFWemF4VUhmMkFPSDdmVGpSbnZIak4zT1JtNXJsblY1NCcsIHsKICAgICAgZW1haWw6IGF1dGhEYXRhLmVtYWlsLAogICAgICBwYXNzd29yZDogYXV0aERhdGEucGFzc3dvcmQsCiAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgY29tbWl0KCdhdXRoVXNlcicsIHsKICAgICAgICB0b2tlbjogcmVzLmRhdGEuaWRUb2tlbiwKICAgICAgICB1c2VySWQ6IHJlcy5kYXRhLmxvY2FsSWQKICAgICAgfSk7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgZXhwaXJhdGlvbkRhdGUgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgcmVzLmRhdGEuZXhwaXJlc0luICogMTAwMCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLmlkVG9rZW4pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgcmVzLmRhdGEubG9jYWxJZCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdleHBpcmF0aW9uRGF0ZScsIGV4cGlyYXRpb25EYXRlKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VtYWlsJywgYXV0aERhdGEuZW1haWwpOwogICAgICBkaXNwYXRjaCgnc3RvcmVVc2VyJywgYXV0aERhdGEpOwogICAgICBkaXNwYXRjaCgnc2V0TG9nb3V0VGltZXInLCByZXMuZGF0YS5leHBpcmVzSW4pOwogICAgICByb3V0ZXIucmVwbGFjZSgnLycpOwogICAgfSkuY2F0Y2goKTsKICB9LAogIHN0b3JlVXNlcjogZnVuY3Rpb24gc3RvcmVVc2VyKF9yZWYzLCB1c2VyRGF0YSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwoKICAgIGlmICghc3RhdGUuaWRUb2tlbikgewogICAgICByZXR1cm47CiAgICB9CgogICAgbWFpbkF4aW9zLnBvc3QoJy91c2Vycy5qc29uJyArICc/YXV0aD0nICsgc3RhdGUuaWRUb2tlbiwgdXNlckRhdGEpLnRoZW4oKS5jYXRjaCgpOwogIH0sCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWY0LCBhdXRoRGF0YSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgYXhpb3MucG9zdCgnOnNpZ25JbldpdGhQYXNzd29yZD9rZXk9QUl6YVN5QVZ6YXhVSGYyQU9IN2ZUalJudkhqTjNPUm01cmxuVjU0JywgewogICAgICBlbWFpbDogYXV0aERhdGEuZW1haWwsCiAgICAgIHBhc3N3b3JkOiBhdXRoRGF0YS5wYXNzd29yZCwKICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb21taXQoJ2F1dGhVc2VyJywgewogICAgICAgIHRva2VuOiByZXMuZGF0YS5pZFRva2VuLAogICAgICAgIHVzZXJJZDogcmVzLmRhdGEubG9jYWxJZAogICAgICB9KTsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyByZXMuZGF0YS5leHBpcmVzSW4gKiAxMDAwKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VtYWlsJywgYXV0aERhdGEuZW1haWwpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXMuZGF0YS5pZFRva2VuKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIHJlcy5kYXRhLmxvY2FsSWQpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZXhwaXJhdGlvbkRhdGUnLCBleHBpcmF0aW9uRGF0ZSk7CiAgICAgIGRpc3BhdGNoKCdzZXRMb2dvdXRUaW1lcicsIHJlcy5kYXRhLmV4cGlyZXNJbik7CiAgICAgIHJvdXRlci5yZXBsYWNlKCcvJyk7CiAgICB9KS5jYXRjaCgpOwogIH0sCiAgYXR0ZW1wdEF1dG9Mb2dpbjogZnVuY3Rpb24gYXR0ZW1wdEF1dG9Mb2dpbihfcmVmNSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgaWYgKCF0b2tlbikgcmV0dXJuOwogICAgdmFyIGV4cGlyYXRpb25EYXRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2V4cGlyYXRpb25EYXRlJyk7CiAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKCiAgICBpZiAobm93ID49IGV4cGlyYXRpb25EYXRlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwogICAgY29tbWl0KCdhdXRoVXNlcicsIHsKICAgICAgdG9rZW46IHRva2VuLAogICAgICB1c2VySWQ6IHVzZXJJZAogICAgfSk7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmNikgewogICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKICAgIGNvbW1pdCgnY2xlYXJEYXRhJyk7CiAgICByb3V0ZXIucmVwbGFjZSgnL2xvZ2luJyk7CiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICB9LAogIGZldGNoVXNlcnM6IGZ1bmN0aW9uIGZldGNoVXNlcnMoX3JlZjcpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNy5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmNy5zdGF0ZTsKICAgIG1haW5BeGlvcy5nZXQoJy91c2Vycy5qc29uJykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CiAgICAgIHZhciB1c2VycyA9IFtdOwoKICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHsKICAgICAgICB2YXIgdXNlciA9IGRhdGFba2V5XTsKICAgICAgICB1c2VyLmlkID0ga2V5OwogICAgICAgIHVzZXJzLnB1c2godXNlcik7CiAgICAgIH0KCiAgICAgIGNvbW1pdCgnc3RvcmVVc2VycycsIHVzZXJzKTsKICAgIH0pLmNhdGNoKCk7CiAgfQp9Owp2YXIgZ2V0dGVycyA9IHsKICB1c2VyOiBmdW5jdGlvbiB1c2VyKHN0YXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGVtYWlsKSB7CiAgICAgIHZhciB1c2VyID0gc3RhdGUudXNlcnMuZmluZChmdW5jdGlvbiAodXNlcikgewogICAgICAgIHJldHVybiB1c2VyLmVtYWlsID09PSBlbWFpbDsKICAgICAgfSk7CgogICAgICBpZiAodXNlci5hZG1pbiA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfTsKICB9LAogIHVzZXJJZDogZnVuY3Rpb24gdXNlcklkKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudXNlcklkOwogIH0sCiAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pZFRva2VuICE9PSBudWxsOwogIH0sCiAgaWRUb2tlbjogZnVuY3Rpb24gaWRUb2tlbihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmlkVG9rZW47CiAgfSwKICB1c2VyczogZnVuY3Rpb24gdXNlcnMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS51c2VyczsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzCn07"},{"version":3,"sources":["C:/Users/boras/OneDrive/Desktop/Web_Programming_Erasmus/src/store/modules/auth.js"],"names":["axios","mainAxios","router","state","idToken","userId","users","mutations","authUser","userData","token","storeUsers","clearData","userEmail","actions","setLogoutTimer","expirationTime","commit","setTimeout","signup","authData","dispatch","post","email","password","returnSecureToken","then","res","data","localId","now","Date","expirationDate","getTime","expiresIn","localStorage","setItem","replace","catch","storeUser","login","attemptAutoLogin","getItem","logout","clear","fetchUsers","get","key","user","id","push","getters","find","admin","isAuthenticated"],"mappings":"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","sourcesContent":["import axios from '../../axios-auth'\r\nimport mainAxios from 'axios'\r\nimport router from '../../router/index'\r\n\r\nconst state = {\r\n  idToken: null,\r\n  userId: null,\r\n  users: []\r\n}\r\n\r\nconst mutations = {\r\n  authUser (state, userData) {\r\n    state.idToken = userData.token\r\n    state.userId = userData.userId\r\n  },\r\n  storeUsers (state, users) {\r\n    state.users = users\r\n  },\r\n  clearData (state) {\r\n    state.idToken = null\r\n    state.userId = null\r\n    state.userEmail = null\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  setLogoutTimer ({ commit }, expirationTime) {\r\n    setTimeout(() => {\r\n      commit('clearData')\r\n    }, expirationTime * 1000)\r\n  },\r\n  signup ({ commit, dispatch }, authData) {\r\n    axios.post(':signUp?key=AIzaSyAVzaxUHf2AOH7fTjRnvHjN3ORm5rlnV54', {\r\n      email: authData.email,\r\n      password: authData.password,\r\n      returnSecureToken: true\r\n    })\r\n      .then(res => {\r\n        commit('authUser', {\r\n          token: res.data.idToken,\r\n          userId: res.data.localId\r\n        })\r\n        const now = new Date()\r\n        const expirationDate = new Date(now.getTime() + res.data.expiresIn * 1000)\r\n        localStorage.setItem('token', res.data.idToken)\r\n        localStorage.setItem('userId', res.data.localId)\r\n        localStorage.setItem('expirationDate', expirationDate)\r\n        localStorage.setItem('email', authData.email)\r\n        dispatch('storeUser', authData)\r\n        dispatch('setLogoutTimer', res.data.expiresIn)\r\n        router.replace('/')\r\n      })\r\n      .catch()\r\n  },\r\n  storeUser ({ commit, state }, userData) {\r\n    if (!state.idToken) {\r\n      return\r\n    }\r\n    mainAxios.post('/users.json' + '?auth=' + state.idToken, userData)\r\n      .then()\r\n      .catch()\r\n  },\r\n  login ({ commit, dispatch }, authData) {\r\n    axios.post(':signInWithPassword?key=AIzaSyAVzaxUHf2AOH7fTjRnvHjN3ORm5rlnV54', {\r\n      email: authData.email,\r\n      password: authData.password,\r\n      returnSecureToken: true\r\n    })\r\n      .then(res => {\r\n        commit('authUser', {\r\n          token: res.data.idToken,\r\n          userId: res.data.localId\r\n        })\r\n        const now = new Date()\r\n        const expirationDate = new Date(now.getTime() + res.data.expiresIn * 1000)\r\n        localStorage.setItem('email', authData.email)\r\n        localStorage.setItem('token', res.data.idToken)\r\n        localStorage.setItem('userId', res.data.localId)\r\n        localStorage.setItem('expirationDate', expirationDate)\r\n        dispatch('setLogoutTimer', res.data.expiresIn)\r\n        router.replace('/')\r\n      })\r\n      .catch()\r\n  },\r\n  attemptAutoLogin ({ commit }) {\r\n    const token = localStorage.getItem('token')\r\n    if (!token) return\r\n    const expirationDate = localStorage.getItem('expirationDate')\r\n    const now = new Date()\r\n    if (now >= expirationDate) {\r\n      return\r\n    }\r\n    const userId = localStorage.getItem('userId')\r\n    commit('authUser', {\r\n      token: token,\r\n      userId: userId\r\n    })\r\n  },\r\n  logout ({ commit }) {\r\n    commit('clearData')\r\n    router.replace('/login')\r\n    localStorage.clear()\r\n  },\r\n  fetchUsers ({ commit, state }) {\r\n    mainAxios.get('/users.json')\r\n      .then((res) => {\r\n        const data = res.data\r\n        const users = []\r\n        for (const key in data) {\r\n          const user = data[key]\r\n          user.id = key\r\n          users.push(user)\r\n        }\r\n        commit('storeUsers', users)\r\n      })\r\n      .catch()\r\n  }\r\n}\r\n\r\nconst getters = {\r\n  user: (state) => (email) => {\r\n    const user = state.users.find(user => user.email === email)\r\n    if (user.admin === true) {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  },\r\n  userId (state) {\r\n    return state.userId\r\n  },\r\n  isAuthenticated (state) {\r\n    return state.idToken !== null\r\n  },\r\n  idToken (state) {\r\n    return state.idToken\r\n  },\r\n  users: (state) => {\r\n    return state.users\r\n  }\r\n}\r\n\r\nexport default {\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters\r\n}\r\n"]}]}