{"remainingRequest":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js!C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\src\\vue-projects\\zavrsni\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\src\\vue-projects\\zavrsni\\src\\views\\Apartment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\src\\vue-projects\\zavrsni\\src\\views\\Apartment.vue","mtime":1601210356782},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVzZXJ2YXRpb25EYXRhOiB7CiAgICAgICAgZGF0ZXM6IFtdCiAgICAgIH0sCiAgICAgIHJlc2VydmVkRGF0ZXM6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgbWluOiBmdW5jdGlvbiBtaW4oKSB7CiAgICAgIHZhciBtaW4gPSBuZXcgRGF0ZSgpOwogICAgICByZXR1cm4gbWluLnRvSVNPU3RyaW5nKCk7CiAgICB9LAogICAgZGF0ZVJhbmdlVGV4dDogZnVuY3Rpb24gZGF0ZVJhbmdlVGV4dCgpIHsKICAgICAgcmV0dXJuIHRoaXMucmVzZXJ2YXRpb25EYXRhLmRhdGVzLmpvaW4oJyB+ICcpOwogICAgfSwKICAgIGF1dGg6IGZ1bmN0aW9uIGF1dGgoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmlzQXV0aGVudGljYXRlZDsKICAgIH0gLy8gbWluICgpIHsKICAgIC8vICAgcmV0dXJuIG5ldyBEYXRlKCd5eXl5LU1NLWRkJykKICAgIC8vIH0KCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRBbGxvd2VkRGF0ZXM6IGZ1bmN0aW9uIGdldEFsbG93ZWREYXRlcyh2YWwpIHsKICAgICAgcmV0dXJuICF0aGlzLnJlc2VydmVkRGF0ZXMuc29tZShmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHZhciBmcm9tID0gbmV3IERhdGUoZWxlbWVudC5kYXRlc1swXSkuZ2V0VGltZSgpOwogICAgICAgIHZhciB0byA9IG5ldyBEYXRlKGVsZW1lbnQuZGF0ZXNbMV0pLmdldFRpbWUoKTsKICAgICAgICB2YXIgY2hlY2sgPSBuZXcgRGF0ZSh2YWwpLmdldFRpbWUoKTsKICAgICAgICByZXR1cm4gY2hlY2sgPj0gZnJvbSAmJiBjaGVjayA8PSB0bzsKICAgICAgfSk7CiAgICB9LAogICAgc2F2ZVJlc2VydmF0aW9uOiBmdW5jdGlvbiBzYXZlUmVzZXJ2YXRpb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnJlc2VydmF0aW9uRGF0YS5hcGFydG1lbnRJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgdGhpcy5yZXNlcnZhdGlvbkRhdGEudXNlckVtYWlsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VtYWlsJyk7CiAgICAgIGF4aW9zLnBvc3QoJy9yZXNlcnZhdGlvbnMuanNvbicgKyAnP2F1dGg9JyArIHRoaXMuJHN0b3JlLmdldHRlcnMuaWRUb2tlbiwgdGhpcy5yZXNlcnZhdGlvbkRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnJlc2VydmF0aW9uRGF0YS5pZCA9IHJlcy5kYXRhLm5hbWU7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzdG9yZVJlc2VydmF0aW9uJywgdGhpcy5yZXNlcnZhdGlvbkRhdGEpOwogICAgICB0aGlzLnJlc2VydmF0aW9uRGF0YS5kYXRlcyA9IFtdOwogICAgICB0aGlzLiRkZXN0cm95KCk7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvJyk7CiAgICB9IC8vIGFsbG93ZWREYXRlczogdmFsID0+IHBhcnNlSW50KHZhbC5zcGxpdCgnLScpWzJdLCAxMCkgJSAyID09PSAwCgogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCdpZCBhcGFydG1hbmEnKTsKICAgIGNvbnNvbGUubG9nKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgICB0aGlzLnJlc2VydmVkRGF0ZXMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmFwYXJ0bWVudFJlc2VydmF0aW9ucyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgY29uc29sZS5sb2coJ2RhdHVtaScpOwogICAgY29uc29sZS5sb2codGhpcy5yZXNlcnZlZERhdGVzKTsKICB9Cn07"},{"version":3,"sources":["Apartment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,eAAA,EAAA;AACA,QAAA,KAAA,EAAA;AADA,OADA;AAIA,MAAA,aAAA,EAAA;AAJA,KAAA;AAAA,GADA;AAOA,EAAA,QAAA,EAAA;AACA,IAAA,GADA,iBACA;AACA,UAAA,GAAA,GAAA,IAAA,IAAA,EAAA;AACA,aAAA,GAAA,CAAA,WAAA,EAAA;AACA,KAJA;AAKA,IAAA,aALA,2BAKA;AACA,aAAA,KAAA,eAAA,CAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA,KAPA;AAQA,IAAA,IARA,kBAQA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,eAAA;AACA,KAVA,CAWA;AACA;AACA;;AAbA,GAPA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,2BACA,GADA,EACA;AACA,aAAA,CAAA,KAAA,aAAA,CAAA,IAAA,CAAA,UAAA,OAAA,EAAA;AACA,YAAA,IAAA,GAAA,IAAA,IAAA,CAAA,OAAA,CAAA,KAAA,CAAA,CAAA,CAAA,EAAA,OAAA,EAAA;AACA,YAAA,EAAA,GAAA,IAAA,IAAA,CAAA,OAAA,CAAA,KAAA,CAAA,CAAA,CAAA,EAAA,OAAA,EAAA;AACA,YAAA,KAAA,GAAA,IAAA,IAAA,CAAA,GAAA,EAAA,OAAA,EAAA;AACA,eAAA,KAAA,IAAA,IAAA,IAAA,KAAA,IAAA,EAAA;AACA,OALA,CAAA;AAMA,KARA;AASA,IAAA,eATA,6BASA;AAAA;;AACA,WAAA,eAAA,CAAA,WAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,WAAA,eAAA,CAAA,SAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,MAAA,KAAA,CACA,IADA,CAEA,uBAAA,QAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,OAFA,EAGA,KAAA,eAHA,EAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,eAAA,CAAA,EAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAPA,EAQA,KARA,CAQA,UAAA,GAAA;AAAA,eAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA;AAAA,OARA;AAUA,WAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,EAAA,KAAA,eAAA;AACA,WAAA,eAAA,CAAA,KAAA,GAAA,EAAA;AACA,WAAA,QAAA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA,GAAA;AACA,KA1BA,CA2BA;;AA3BA,GAtBA;AAmDA,EAAA,OAnDA,qBAmDA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,cAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,SAAA,aAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,qBAAA,CACA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA,CAAA;AAGA,IAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA,aAAA;AACA;AA3DA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <v-container>\r\n      <v-img\r\n        src=\"https://cdn.vuetifyjs.com/images/cards/sunshine.jpg\"\r\n        height=\"400px\"\r\n        class=\"mb-5\"\r\n      ></v-img>\r\n      <v-date-picker\r\n        :allowed-dates=\"getAllowedDates\"\r\n        :disabled=\"!auth\"\r\n        :min=\"min\"\r\n        v-show=\"auth\"\r\n        v-model=\"reservationData.dates\"\r\n        range\r\n        full-width\r\n        :locale=\"$i18n.locale\"\r\n      ></v-date-picker>\r\n      <p style=\"color: white\" v-if=\"!auth\">\r\n        Please login to make a reservation\r\n      </p>\r\n      <v-divider class=\"mb-4 mt-4\"></v-divider>\r\n      <v-btn\r\n        :disabled=\"reservationData.dates.length < 2\"\r\n        color=\"success\"\r\n        class=\"mr-4\"\r\n        @click=\"saveReservation\"\r\n      >\r\n        Save\r\n      </v-btn>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data: () => ({\r\n    reservationData: {\r\n      dates: []\r\n    },\r\n    reservedDates: null\r\n  }),\r\n  computed: {\r\n    min () {\r\n      const min = new Date()\r\n      return min.toISOString()\r\n    },\r\n    dateRangeText () {\r\n      return this.reservationData.dates.join(' ~ ')\r\n    },\r\n    auth () {\r\n      return this.$store.getters.isAuthenticated\r\n    }\r\n    // min () {\r\n    //   return new Date('yyyy-MM-dd')\r\n    // }\r\n  },\r\n  methods: {\r\n    getAllowedDates (val) {\r\n      return !this.reservedDates.some((element) => {\r\n        const from = new Date(element.dates[0]).getTime()\r\n        const to = new Date(element.dates[1]).getTime()\r\n        const check = new Date(val).getTime()\r\n        return check >= from && check <= to\r\n      })\r\n    },\r\n    saveReservation () {\r\n      this.reservationData.apartmentId = this.$route.params.id\r\n      this.reservationData.userEmail = localStorage.getItem('email')\r\n      axios\r\n        .post(\r\n          '/reservations.json' + '?auth=' + this.$store.getters.idToken,\r\n          this.reservationData\r\n        )\r\n        .then((res) => {\r\n          this.reservationData.id = res.data.name\r\n        })\r\n        .catch((err) => console.log(err))\r\n\r\n      this.$store.dispatch('storeReservation', this.reservationData)\r\n      this.reservationData.dates = []\r\n      this.$destroy()\r\n      this.$router.replace('/')\r\n    }\r\n    // allowedDates: val => parseInt(val.split('-')[2], 10) % 2 === 0\r\n  },\r\n  created () {\r\n    console.log('id apartmana')\r\n    console.log(this.$route.params.id)\r\n    this.reservedDates = this.$store.getters.apartmentReservations(\r\n      this.$route.params.id\r\n    )\r\n    console.log('datumi')\r\n    console.log(this.reservedDates)\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views"}]}