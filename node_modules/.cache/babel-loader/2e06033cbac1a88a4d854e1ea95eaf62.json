{"remainingRequest":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js!C:\\src\\vue-projects\\zavrsni\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\src\\vue-projects\\zavrsni\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\src\\vue-projects\\zavrsni\\src\\store\\modules\\auth.js","mtime":1601245275741},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgYXhpb3MgZnJvbSAnLi4vLi4vYXhpb3MtYXV0aCc7CmltcG9ydCBtYWluQXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL3JvdXRlci9pbmRleCc7CnZhciBzdGF0ZSA9IHsKICBpZFRva2VuOiBudWxsLAogIHVzZXJJZDogbnVsbCwKICB1c2VyczogW10KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBhdXRoVXNlcjogZnVuY3Rpb24gYXV0aFVzZXIoc3RhdGUsIHVzZXJEYXRhKSB7CiAgICBzdGF0ZS5pZFRva2VuID0gdXNlckRhdGEudG9rZW47CiAgICBzdGF0ZS51c2VySWQgPSB1c2VyRGF0YS51c2VySWQ7CiAgfSwKICBzdG9yZVVzZXJzOiBmdW5jdGlvbiBzdG9yZVVzZXJzKHN0YXRlLCB1c2VycykgewogICAgc3RhdGUudXNlcnMgPSB1c2VyczsKICB9LAogIGNsZWFyRGF0YTogZnVuY3Rpb24gY2xlYXJEYXRhKHN0YXRlKSB7CiAgICBzdGF0ZS5pZFRva2VuID0gbnVsbDsKICAgIHN0YXRlLnVzZXJJZCA9IG51bGw7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICBzZXRMb2dvdXRUaW1lcjogZnVuY3Rpb24gc2V0TG9nb3V0VGltZXIoX3JlZiwgZXhwaXJhdGlvblRpbWUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBjb21taXQoJ2NsZWFyRGF0YScpOwogICAgfSwgZXhwaXJhdGlvblRpbWUgKiAxMDAwKTsKICB9LAogIHNpZ251cDogZnVuY3Rpb24gc2lnbnVwKF9yZWYyLCBhdXRoRGF0YSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYyLmRpc3BhdGNoOwogICAgYXhpb3MucG9zdCgnOnNpZ25VcD9rZXk9QUl6YVN5QnV0SFpTNzdNVGJiVVFNN00wZU0wTllCN2w3S3hpYmZJJywgewogICAgICBlbWFpbDogYXV0aERhdGEuZW1haWwsCiAgICAgIHBhc3N3b3JkOiBhdXRoRGF0YS5wYXNzd29yZCwKICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb21taXQoJ2F1dGhVc2VyJywgewogICAgICAgIHRva2VuOiByZXMuZGF0YS5pZFRva2VuLAogICAgICAgIHVzZXJJZDogcmVzLmRhdGEubG9jYWxJZAogICAgICB9KTsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyByZXMuZGF0YS5leHBpcmVzSW4gKiAxMDAwKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzLmRhdGEuaWRUb2tlbik7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCByZXMuZGF0YS5sb2NhbElkKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V4cGlyYXRpb25EYXRlJywgZXhwaXJhdGlvbkRhdGUpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW1haWwnLCBhdXRoRGF0YS5lbWFpbCk7CiAgICAgIGRpc3BhdGNoKCdzdG9yZVVzZXInLCBhdXRoRGF0YSk7CiAgICAgIGRpc3BhdGNoKCdzZXRMb2dvdXRUaW1lcicsIHJlcy5kYXRhLmV4cGlyZXNJbik7CiAgICAgIHJvdXRlci5yZXBsYWNlKCcvJyk7CiAgICB9KS5jYXRjaCgpOwogIH0sCiAgc3RvcmVVc2VyOiBmdW5jdGlvbiBzdG9yZVVzZXIoX3JlZjMsIHVzZXJEYXRhKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CgogICAgaWYgKCFzdGF0ZS5pZFRva2VuKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBtYWluQXhpb3MucG9zdCgnL3VzZXJzLmpzb24nICsgJz9hdXRoPScgKyBzdGF0ZS5pZFRva2VuLCB1c2VyRGF0YSkudGhlbigpLmNhdGNoKCk7CiAgfSwKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZjQsIGF1dGhEYXRhKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0LAogICAgICAgIGRpc3BhdGNoID0gX3JlZjQuZGlzcGF0Y2g7CiAgICBheGlvcy5wb3N0KCc6c2lnbkluV2l0aFBhc3N3b3JkP2tleT1BSXphU3lCdXRIWlM3N01UYmJVUU03TTBlTTBOWUI3bDdLeGliZkknLCB7CiAgICAgIGVtYWlsOiBhdXRoRGF0YS5lbWFpbCwKICAgICAgcGFzc3dvcmQ6IGF1dGhEYXRhLnBhc3N3b3JkLAogICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGNvbW1pdCgnYXV0aFVzZXInLCB7CiAgICAgICAgdG9rZW46IHJlcy5kYXRhLmlkVG9rZW4sCiAgICAgICAgdXNlcklkOiByZXMuZGF0YS5sb2NhbElkCiAgICAgIH0pOwogICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICAgICAgdmFyIGV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIHJlcy5kYXRhLmV4cGlyZXNJbiAqIDEwMDApOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW1haWwnLCBhdXRoRGF0YS5lbWFpbCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLmlkVG9rZW4pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgcmVzLmRhdGEubG9jYWxJZCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdleHBpcmF0aW9uRGF0ZScsIGV4cGlyYXRpb25EYXRlKTsKICAgICAgZGlzcGF0Y2goJ3NldExvZ291dFRpbWVyJywgcmVzLmRhdGEuZXhwaXJlc0luKTsKICAgICAgcm91dGVyLnJlcGxhY2UoJy8nKTsKICAgIH0pLmNhdGNoKCk7CiAgfSwKICBhdHRlbXB0QXV0b0xvZ2luOiBmdW5jdGlvbiBhdHRlbXB0QXV0b0xvZ2luKF9yZWY1KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICBpZiAoIXRva2VuKSByZXR1cm47CiAgICB2YXIgZXhwaXJhdGlvbkRhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZXhwaXJhdGlvbkRhdGUnKTsKICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwoKICAgIGlmIChub3cgPj0gZXhwaXJhdGlvbkRhdGUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciB1c2VySWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJyk7CiAgICBjb21taXQoJ2F1dGhVc2VyJywgewogICAgICB0b2tlbjogdG9rZW4sCiAgICAgIHVzZXJJZDogdXNlcklkCiAgICB9KTsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWY2KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjYuY29tbWl0OwogICAgY29tbWl0KCdjbGVhckRhdGEnKTsKICAgIHJvdXRlci5yZXBsYWNlKCcvbG9naW4nKTsKICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogIH0sCiAgZmV0Y2hVc2VyczogZnVuY3Rpb24gZmV0Y2hVc2VycyhfcmVmNykgewogICAgdmFyIGNvbW1pdCA9IF9yZWY3LmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWY3LnN0YXRlOwogICAgbWFpbkF4aW9zLmdldCgnL3VzZXJzLmpzb24nKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKICAgICAgdmFyIHVzZXJzID0gW107CgogICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkgewogICAgICAgIHZhciB1c2VyID0gZGF0YVtrZXldOwogICAgICAgIHVzZXIuaWQgPSBrZXk7CiAgICAgICAgdXNlcnMucHVzaCh1c2VyKTsKICAgICAgfQoKICAgICAgY29tbWl0KCdzdG9yZVVzZXJzJywgdXNlcnMpOwogICAgfSkuY2F0Y2goKTsKICB9Cn07CnZhciBnZXR0ZXJzID0gewogIHVzZXI6IGZ1bmN0aW9uIHVzZXIoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoZW1haWwpIHsKICAgICAgaWYgKCFnZXR0ZXJzLmlzQXV0aGVudGljYXRlZCkgcmV0dXJuIHt9OwogICAgICB2YXIgdXNlciA9IHN0YXRlLnVzZXJzLmZpbmQoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICByZXR1cm4gdXNlci5lbWFpbCA9PT0gZW1haWw7CiAgICAgIH0pOwoKICAgICAgaWYgKCF1c2VyKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CgogICAgICByZXR1cm4gdXNlcjsKICAgIH07CiAgfSwKICB1c2VySWQ6IGZ1bmN0aW9uIHVzZXJJZChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXJJZDsKICB9LAogIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuaWRUb2tlbiAhPT0gbnVsbDsKICB9LAogIGlkVG9rZW46IGZ1bmN0aW9uIGlkVG9rZW4oc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pZFRva2VuOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zLAogIGdldHRlcnM6IGdldHRlcnMKfTs="},{"version":3,"sources":["C:/src/vue-projects/zavrsni/src/store/modules/auth.js"],"names":["axios","mainAxios","router","state","idToken","userId","users","mutations","authUser","userData","token","storeUsers","clearData","actions","setLogoutTimer","expirationTime","commit","setTimeout","signup","authData","dispatch","post","email","password","returnSecureToken","then","res","data","localId","now","Date","expirationDate","getTime","expiresIn","localStorage","setItem","replace","catch","storeUser","login","attemptAutoLogin","getItem","logout","clear","fetchUsers","get","key","user","id","push","getters","isAuthenticated","find"],"mappings":"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","sourcesContent":["import axios from '../../axios-auth'\r\nimport mainAxios from 'axios'\r\nimport router from '../../router/index'\r\n\r\nconst state = {\r\n  idToken: null,\r\n  userId: null,\r\n  users: []\r\n}\r\n\r\nconst mutations = {\r\n  authUser (state, userData) {\r\n    state.idToken = userData.token\r\n    state.userId = userData.userId\r\n  },\r\n  storeUsers (state, users) {\r\n    state.users = users\r\n  },\r\n  clearData (state) {\r\n    state.idToken = null\r\n    state.userId = null\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  setLogoutTimer ({ commit }, expirationTime) {\r\n    setTimeout(() => {\r\n      commit('clearData')\r\n    }, expirationTime * 1000)\r\n  },\r\n  signup ({ commit, dispatch }, authData) {\r\n    axios.post(':signUp?key=AIzaSyButHZS77MTbbUQM7M0eM0NYB7l7KxibfI', {\r\n      email: authData.email,\r\n      password: authData.password,\r\n      returnSecureToken: true\r\n    })\r\n      .then(res => {\r\n        commit('authUser', {\r\n          token: res.data.idToken,\r\n          userId: res.data.localId\r\n        })\r\n        const now = new Date()\r\n        const expirationDate = new Date(now.getTime() + res.data.expiresIn * 1000)\r\n        localStorage.setItem('token', res.data.idToken)\r\n        localStorage.setItem('userId', res.data.localId)\r\n        localStorage.setItem('expirationDate', expirationDate)\r\n        localStorage.setItem('email', authData.email)\r\n        dispatch('storeUser', authData)\r\n        dispatch('setLogoutTimer', res.data.expiresIn)\r\n        router.replace('/')\r\n      })\r\n      .catch()\r\n  },\r\n  storeUser ({ commit, state }, userData) {\r\n    if (!state.idToken) {\r\n      return\r\n    }\r\n    mainAxios.post('/users.json' + '?auth=' + state.idToken, userData)\r\n      .then()\r\n      .catch()\r\n  },\r\n  login ({ commit, dispatch }, authData) {\r\n    axios.post(':signInWithPassword?key=AIzaSyButHZS77MTbbUQM7M0eM0NYB7l7KxibfI', {\r\n      email: authData.email,\r\n      password: authData.password,\r\n      returnSecureToken: true\r\n    })\r\n      .then(res => {\r\n        commit('authUser', {\r\n          token: res.data.idToken,\r\n          userId: res.data.localId\r\n        })\r\n        const now = new Date()\r\n        const expirationDate = new Date(now.getTime() + res.data.expiresIn * 1000)\r\n        localStorage.setItem('email', authData.email)\r\n        localStorage.setItem('token', res.data.idToken)\r\n        localStorage.setItem('userId', res.data.localId)\r\n        localStorage.setItem('expirationDate', expirationDate)\r\n        dispatch('setLogoutTimer', res.data.expiresIn)\r\n        router.replace('/')\r\n      })\r\n      .catch()\r\n  },\r\n  attemptAutoLogin ({ commit }) {\r\n    const token = localStorage.getItem('token')\r\n    if (!token) return\r\n    const expirationDate = localStorage.getItem('expirationDate')\r\n    const now = new Date()\r\n    if (now >= expirationDate) {\r\n      return\r\n    }\r\n    const userId = localStorage.getItem('userId')\r\n    commit('authUser', {\r\n      token: token,\r\n      userId: userId\r\n    })\r\n  },\r\n  logout ({ commit }) {\r\n    commit('clearData')\r\n    router.replace('/login')\r\n    localStorage.clear()\r\n  },\r\n  fetchUsers ({ commit, state }) {\r\n    mainAxios.get('/users.json')\r\n      .then((res) => {\r\n        const data = res.data\r\n        const users = []\r\n        for (const key in data) {\r\n          const user = data[key]\r\n          user.id = key\r\n          users.push(user)\r\n        }\r\n        commit('storeUsers', users)\r\n      })\r\n      .catch()\r\n  }\r\n}\r\n\r\nconst getters = {\r\n  user: (state, getters) => (email) => {\r\n    if (!getters.isAuthenticated) return {}\r\n    const user = state.users.find(user => user.email === email)\r\n    if (!user) {\r\n      return {}\r\n    }\r\n    return user\r\n  },\r\n  userId (state) {\r\n    return state.userId\r\n  },\r\n  isAuthenticated (state) {\r\n    return state.idToken !== null\r\n  },\r\n  idToken (state) {\r\n    return state.idToken\r\n  }\r\n}\r\n\r\nexport default {\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters\r\n}\r\n"]}]}