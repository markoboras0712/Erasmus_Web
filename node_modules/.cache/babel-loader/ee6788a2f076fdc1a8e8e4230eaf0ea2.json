{"remainingRequest":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js!C:\\src\\vue-projects\\zavrsni\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\src\\vue-projects\\zavrsni\\src\\store\\modules\\reservations.js","dependencies":[{"path":"C:\\src\\vue-projects\\zavrsni\\src\\store\\modules\\reservations.js","mtime":1601272856071},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\src\\vue-projects\\zavrsni\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0IG1haW5BeGlvcyBmcm9tICdheGlvcyc7CnZhciBzdGF0ZSA9IHsKICByZXNlcnZhdGlvbnM6IFtdCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgJ1NFVF9SRVNFUlZBVElPTlMnOiBmdW5jdGlvbiBTRVRfUkVTRVJWQVRJT05TKHN0YXRlLCByZXNlcnZhdGlvbnMpIHsKICAgIHN0YXRlLnJlc2VydmF0aW9ucyA9IHJlc2VydmF0aW9uczsKICB9LAogICdTVE9SRV9SRVNFUlZBVElPTic6IGZ1bmN0aW9uIFNUT1JFX1JFU0VSVkFUSU9OKHN0YXRlLCByZXNlcnZhdGlvbikgewogICAgc3RhdGUucmVzZXJ2YXRpb25zLnB1c2gocmVzZXJ2YXRpb24pOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgaW5pdFJlc2VydmF0aW9uczogZnVuY3Rpb24gaW5pdFJlc2VydmF0aW9ucyhfcmVmKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlOwogICAgbWFpbkF4aW9zLmdldCgnL3Jlc2VydmF0aW9ucy5qc29uJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICB2YXIgcmVzZXJ2YXRpb25zID0gW107CgogICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkgewogICAgICAgIHZhciByZXNlcnZhdGlvbiA9IGRhdGFba2V5XTsKICAgICAgICByZXNlcnZhdGlvbi5pZCA9IGtleTsKICAgICAgICByZXNlcnZhdGlvbnMucHVzaChyZXNlcnZhdGlvbik7CiAgICAgIH0KCiAgICAgIGNvbW1pdCgnU0VUX1JFU0VSVkFUSU9OUycsIHJlc2VydmF0aW9ucyk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpOwogICAgfSk7CiAgfSwKICBzdG9yZVJlc2VydmF0aW9uOiBmdW5jdGlvbiBzdG9yZVJlc2VydmF0aW9uKF9yZWYyLCByZXNlcnZhdGlvbkRhdGEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgIGNvbW1pdCgnU1RPUkVfUkVTRVJWQVRJT04nLCByZXNlcnZhdGlvbkRhdGEpOwogIH0KfTsKdmFyIGdldHRlcnMgPSB7CiAgYXBhcnRtZW50UmVzZXJ2YXRpb25zOiBmdW5jdGlvbiBhcGFydG1lbnRSZXNlcnZhdGlvbnMoc3RhdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoaWQpIHsKICAgICAgdmFyIGFwYXJ0bWVudFJlc2VydmF0aW9ucyA9IFtdOwogICAgICBhcGFydG1lbnRSZXNlcnZhdGlvbnMgPSBzdGF0ZS5yZXNlcnZhdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChyZXNlcnZhdGlvbikgewogICAgICAgIHJldHVybiByZXNlcnZhdGlvbi5hcGFydG1lbnRJZCA9PT0gaWQ7CiAgICAgIH0pOwogICAgICByZXR1cm4gYXBhcnRtZW50UmVzZXJ2YXRpb25zOwogICAgfTsKICB9LAogIHVzZXJSZXNlcnZhdGlvbnM6IGZ1bmN0aW9uIHVzZXJSZXNlcnZhdGlvbnMoc3RhdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoaWQpIHsKICAgICAgcmV0dXJuIHN0YXRlLnJlc2VydmF0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKHJlc2VydmF0aW9uKSB7CiAgICAgICAgdmFyIGZyb20gPSBuZXcgRGF0ZShyZXNlcnZhdGlvbi5kYXRlc1swXSkuZ2V0VGltZSgpOwogICAgICAgIHZhciBjaGVjayA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIHJldHVybiByZXNlcnZhdGlvbi51c2VySWQgPT09IGlkICYmIGZyb20gPiBjaGVjazsKICAgICAgfSk7CiAgICB9OwogIH0sCiAgcmVzZXJ2YXRpb25zOiBmdW5jdGlvbiByZXNlcnZhdGlvbnMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5yZXNlcnZhdGlvbnM7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycwp9Ow=="},{"version":3,"sources":["C:/src/vue-projects/zavrsni/src/store/modules/reservations.js"],"names":["mainAxios","state","reservations","mutations","reservation","push","actions","initReservations","commit","get","then","response","data","key","id","catch","err","console","log","storeReservation","reservationData","dispatch","getters","apartmentReservations","filter","apartmentId","userReservations","from","Date","dates","getTime","check","userId"],"mappings":";AAAA,OAAOA,SAAP,MAAsB,OAAtB;AAEA,IAAMC,KAAK,GAAG;AACZC,EAAAA,YAAY,EAAE;AADF,CAAd;AAIA,IAAMC,SAAS,GAAG;AAChB,oBADgB,4BACIF,KADJ,EACWC,YADX,EACyB;AACvCD,IAAAA,KAAK,CAACC,YAAN,GAAqBA,YAArB;AACD,GAHe;AAIhB,qBAJgB,6BAIKD,KAJL,EAIYG,WAJZ,EAIyB;AACvCH,IAAAA,KAAK,CAACC,YAAN,CAAmBG,IAAnB,CAAwBD,WAAxB;AACD;AANe,CAAlB;AASA,IAAME,OAAO,GAAG;AACdC,EAAAA,gBADc,kCACuB;AAAA,QAAjBC,MAAiB,QAAjBA,MAAiB;AAAA,QAATP,KAAS,QAATA,KAAS;AACnCD,IAAAA,SAAS,CAACS,GAAV,CAAc,oBAAd,EACGC,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB,UAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAtB;AACA,UAAMV,YAAY,GAAG,EAArB;;AACA,WAAK,IAAMW,GAAX,IAAkBD,IAAlB,EAAwB;AACtB,YAAMR,WAAW,GAAGQ,IAAI,CAACC,GAAD,CAAxB;AACAT,QAAAA,WAAW,CAACU,EAAZ,GAAiBD,GAAjB;AACAX,QAAAA,YAAY,CAACG,IAAb,CAAkBD,WAAlB;AACD;;AACDI,MAAAA,MAAM,CAAC,kBAAD,EAAqBN,YAArB,CAAN;AACD,KAVH,EAWGa,KAXH,CAWS,UAAAC,GAAG;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,KAXZ;AAYD,GAda;AAedG,EAAAA,gBAfc,mCAe0BC,eAf1B,EAe2C;AAAA,QAArCZ,MAAqC,SAArCA,MAAqC;AAAA,QAA7Ba,QAA6B,SAA7BA,QAA6B;AACvDb,IAAAA,MAAM,CAAC,mBAAD,EAAsBY,eAAtB,CAAN;AACD;AAjBa,CAAhB;AAoBA,IAAME,OAAO,GAAG;AACdC,EAAAA,qBAAqB,EAAE,+BAACtB,KAAD;AAAA,WAAW,UAACa,EAAD,EAAQ;AACxC,UAAIS,qBAAqB,GAAG,EAA5B;AACAA,MAAAA,qBAAqB,GAAGtB,KAAK,CAACC,YAAN,CAAmBsB,MAAnB,CAA0B,UAAApB,WAAW;AAAA,eAAIA,WAAW,CAACqB,WAAZ,KAA4BX,EAAhC;AAAA,OAArC,CAAxB;AACA,aAAOS,qBAAP;AACD,KAJsB;AAAA,GADT;AAMdG,EAAAA,gBAAgB,EAAE,0BAACzB,KAAD;AAAA,WAAW,UAACa,EAAD,EAAQ;AACnC,aAAOb,KAAK,CAACC,YAAN,CAAmBsB,MAAnB,CAA0B,UAAApB,WAAW,EAAI;AAC9C,YAAMuB,IAAI,GAAG,IAAIC,IAAJ,CAASxB,WAAW,CAACyB,KAAZ,CAAkB,CAAlB,CAAT,EAA+BC,OAA/B,EAAb;AACA,YAAMC,KAAK,GAAG,IAAIH,IAAJ,GAAWE,OAAX,EAAd;AACA,eAAO1B,WAAW,CAAC4B,MAAZ,KAAuBlB,EAAvB,IAA6Ba,IAAI,GAAGI,KAA3C;AACD,OAJM,CAAP;AAKD,KANiB;AAAA,GANJ;AAad7B,EAAAA,YAbc,wBAaAD,KAbA,EAaO;AACnB,WAAOA,KAAK,CAACC,YAAb;AACD;AAfa,CAAhB;AAkBA,eAAe;AACbD,EAAAA,KAAK,EAALA,KADa;AAEbE,EAAAA,SAAS,EAATA,SAFa;AAGbG,EAAAA,OAAO,EAAPA,OAHa;AAIbgB,EAAAA,OAAO,EAAPA;AAJa,CAAf","sourcesContent":["import mainAxios from 'axios'\r\n\r\nconst state = {\r\n  reservations: []\r\n}\r\n\r\nconst mutations = {\r\n  'SET_RESERVATIONS' (state, reservations) {\r\n    state.reservations = reservations\r\n  },\r\n  'STORE_RESERVATION' (state, reservation) {\r\n    state.reservations.push(reservation)\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  initReservations ({ commit, state }) {\r\n    mainAxios.get('/reservations.json')\r\n      .then(response => {\r\n        const data = response.data\r\n        const reservations = []\r\n        for (const key in data) {\r\n          const reservation = data[key]\r\n          reservation.id = key\r\n          reservations.push(reservation)\r\n        }\r\n        commit('SET_RESERVATIONS', reservations)\r\n      })\r\n      .catch(err => console.log(err))\r\n  },\r\n  storeReservation ({ commit, dispatch }, reservationData) {\r\n    commit('STORE_RESERVATION', reservationData)\r\n  }\r\n}\r\n\r\nconst getters = {\r\n  apartmentReservations: (state) => (id) => {\r\n    var apartmentReservations = []\r\n    apartmentReservations = state.reservations.filter(reservation => reservation.apartmentId === id)\r\n    return apartmentReservations\r\n  },\r\n  userReservations: (state) => (id) => {\r\n    return state.reservations.filter(reservation => {\r\n      const from = new Date(reservation.dates[0]).getTime()\r\n      const check = new Date().getTime()\r\n      return reservation.userId === id && from > check\r\n    })\r\n  },\r\n  reservations (state) {\r\n    return state.reservations\r\n  }\r\n}\r\n\r\nexport default {\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters\r\n}\r\n"]}]}